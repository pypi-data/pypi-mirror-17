#!/usr/bin/env python

import sys, argparse
from xrpi import XRPI

parser = argparse.ArgumentParser()

parser.add_argument("-p", "--protein", type = str, help = "Protein Sequence")
parser.add_argument("-r", "--rna", type = str, help = "RNA Sequence")
parser.add_argument("-c", "--confidence", action='store_true', help = "Output confidence levels")
parser.add_argument("-t", "--threshold", type = float, help = "Threshold : defaults to 0.5")

args = parser.parse_args()

if args.rna is None:
	print("Enter an RNA Sequence")
	sys.exit(1)

if args.protein is None:
	print("Enter a Protein Sequence")
	sys.exit(1)

if len(args.rna) < 15:
	print("RNA is too short")
	sys.exit(1)

if len(args.protein) < 25:
	print("Protein is too short")

xrpi = XRPI()

if args.confidence:
	print xrpi.predict_proba(args.protein, args.rna)

else:
	if args.threshold is not None:
		if args.threshold > 1.0 or args.threshold < 0:
			print("Invalid Threshold")
			sys.exit(1)

		else:
			print(xrpi.predict(args.protein, args.rna, args.threshold))

	else:
		print(xrpi.predict(args.protein, args.rna))
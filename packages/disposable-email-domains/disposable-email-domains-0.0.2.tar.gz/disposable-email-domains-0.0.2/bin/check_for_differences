#!/bin/sh

# Clone the source repository
cd /tmp
git clone git@github.com:martenson/disposable-email-domains.git
cd -

# Compare the source files with what's in source_data
diff /tmp/disposable-email-domains/disposable_email_blacklist.conf source_data/disposable_email_blacklist.conf
diff /tmp/disposable-email-domains/whitelist.conf source_data/whitelist.conf
rm -rf /tmp/disposable-email-domains

# Compare the __init__.py to what would be generated by source_data
python bin/parse_source_data > /tmp/disposable_email_domains__init__.py
diff /tmp/disposable_email_domains__init__.py disposable_email_domains/__init__.py
rm /tmp/disposable_email_domains__init__.py
